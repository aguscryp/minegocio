<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Control Celulares</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #e9ecef;
      color: #333;
    }
    header {
      background: #003366;
      color: white;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 {
      margin: 0;
      font-size: 22px;
    }
    .menu-toggle {
      font-size: 24px;
      cursor: pointer;
    }
    nav {
      display: none;
      flex-direction: column;
      background: #002244;
    }
    nav a {
      color: white;
      padding: 12px 20px;
      text-decoration: none;
      border-top: 1px solid #003366;
    }
    nav a:hover {
      background: #001122;
    }
    .container {
      padding: 20px;
      max-width: 900px;
      margin: auto;
      background: white;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      margin-top: 20px;
    }
    h2 {
      text-align: center;
      color: #003366;
      margin-bottom: 20px;
    }
    form {
      display: grid;
      gap: 10px;
      margin-bottom: 20px;
    }
    input, textarea {
      padding: 10px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 5px;
      width: 100%;
    }
    button {
      padding: 10px;
      background: #28a745;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background: #218838;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      font-size: 14px;
    }
    th {
      background: #003366;
      color: white;
    }
    .total {
      font-weight: bold;
      margin-top: 10px;
      text-align: right;
    }
    .whatsapp-btn {
      background: #25D366;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
    }
    @media (max-width: 600px) {
      nav a { text-align: center; }
      form, table { font-size: 14px; }
      .container { padding: 10px; }
    }
  </style>
</head>
<body>

<header>
  <h1><i class="fas fa-mobile-alt"></i> Control Celulares</h1>
  <div class="menu-toggle" onclick="toggleMenu()">â˜°</div>
</header>
<nav id="menu">
  <a href="#ventas">Registrar Venta</a>
  <a href="#encargues">Encargues</a>
  <a href="#vencimientos">Vencimientos</a>
</nav>

<div class="container" id="ventas">
  <h2>Registrar Venta</h2>
  <form id="ventaForm">
    <input type="text" placeholder="Nombre y Apellido" required />
    <input type="text" placeholder="DNI" required />
    <input type="text" placeholder="WhatsApp" required />
    <input type="text" placeholder="Celular Vendido" required />
    <input type="number" placeholder="Cantidad de Cuotas" required />
    <input type="number" placeholder="Monto por Cuota (ARS)" required />
    <input type="text" placeholder="Fechas de Pago (separadas por coma)" required />
    <button type="submit">Guardar Venta</button>
  </form>
  <table id="ventasTable">
    <thead>
      <tr>
        <th>Cliente</th>
        <th>DNI</th>
        <th>WhatsApp</th>
        <th>Celular</th>
        <th>Cuotas</th>
        <th>Monto</th>
        <th>Fechas</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
  <div class="total" id="totalVentas">ðŸ’° Total de todas las cuotas: $0</div>
</div>

<div class="container" id="encargues">
  <h2>Encargues</h2>
  <form id="encargueForm">
    <input type="text" placeholder="Nombre del Cliente" required />
    <textarea placeholder="Detalle del Encargue" required></textarea>
    <button type="submit">Guardar Encargue</button>
  </form>
  <table id="encarguesTable">
    <thead>
      <tr>
        <th>Cliente</th>
        <th>Encargue</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<div class="container" id="vencimientos">
  <h2>Vencimientos del DÃ­a</h2>
  <table id="vencimientosTable">
    <thead>
      <tr>
        <th>Cliente</th>
        <th>WhatsApp</th>
        <th>Fecha</th>
        <th>AcciÃ³n</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script>
  function toggleMenu() {
    const menu = document.getElementById('menu');
    menu.style.display = menu.style.display === 'flex' ? 'none' : 'flex';
  }

  const ventaForm = document.getElementById('ventaForm');
  const ventasTable = document.querySelector('#ventasTable tbody');
  const totalVentas = document.getElementById('totalVentas');
  const vencimientosTable = document.querySelector('#vencimientosTable tbody');

  let total = 0;
  let ventas = JSON.parse(localStorage.getItem('ventas')) || [];

  function renderVentas() {
    ventasTable.innerHTML = '';
    vencimientosTable.innerHTML = '';
    total = 0;
    const hoy = new Date().toISOString().split('T')[0];

    ventas.forEach(v => {
      const row = document.createElement('tr');
      [v.nombre, v.dni, v.whatsapp, v.celular, v.cuotas, `$${v.monto.toFixed(2)}`, v.fechas.join(', ')].forEach(val => {
        const cell = document.createElement('td');
        cell.textContent = val;
        row.appendChild(cell);
      });
      ventasTable.appendChild(row);
      total += v.monto * v.cuotas;

      v.fechas.forEach(f => {
        if (f.trim() === hoy) {
          const vencRow = document.createElement('tr');
          [v.nombre, v.whatsapp, f].forEach(val => {
            const cell = document.createElement('td');
            cell.textContent = val;
            vencRow.appendChild(cell);
          });
          const actionCell = document.createElement('td');
          const btn = document.createElement('button');
          btn.className = 'whatsapp-btn';
          btn.textContent = 'Enviar';
          btn.onclick = () => {
            const mensaje = `Hola ${v.nombre}, recordÃ¡ que hoy vence tu cuota del celular.`;
            window.open(`https://wa.me/${v.whatsapp.replace(/\D/g, '')}?text=${encodeURIComponent(mensaje)}`);
          };
          actionCell.appendChild(btn);
          vencRow.appendChild(actionCell);
          vencimientosTable.appendChild(vencRow);
        }
      });
    });

    totalVentas.textContent = `ðŸ’° Total de todas las cuotas: $${total.toFixed(2)}`;
  }

  ventaForm.addEventListener('submit', function(e) {
    e.preventDefault();
    const inputs = ventaForm.querySelectorAll('input');
    const nombre = inputs[0].value;
    const dni = inputs[1].value;
    const whatsapp = inputs[2].value;
    const celular = inputs[3].value;
    const cuotas = parseInt(inputs[4].value);
    const monto = parseFloat(inputs[5].value);
    const fechas = inputs[6].value.split(',').map(f => f.trim
